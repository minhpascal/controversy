{% extends "base.html" %}
{% block content %}
<span ng-controller='KeywordController'>
  <header>
    <span id=header-content>
      <span id=header-title ng-show="!json">Controversy</span>
      <span id=subheader ng-show="!json">
        hotspots of news articles
      </span>
      <form ng-submit="submit()" ng-show="json" id=top-search>
        <input autocomplete=off type=text placeholder="keyword" ng-class="{ 'top-loading' : $root.is_loading }" name=keyword ng-model="$root.keyword" />
        <span ng-click="$root.clear()" id=clear>&times;</span>
      </form>
      <span id=right-header title="{{ unique.Name }}&mdash;{{ unique.School }}">
          <span ng-show="json"><b>Controversy</b> &middot;</span>
        welcome back, {{ unique.Name|first_name }} &middot; <a href="/logout">logout</a>
      </span>
    </span>
  </header>

  {% raw %}
  <main>
      <form ng-submit='submit()' ng-show="!json" style="text-align:center">
        <input autocomplete=off type=text class=field id=search placeholder="enter a keyword" name=keyword ng-model="keyword" />
        <p>
          use fake sentiment
          <input type=checkbox ng-model="is_testing" checked/>
        </p>
        <input type=submit class=go ng-class="{'disabled' : !can_query, 'loading' : is_loading}" value="{{ button_value }}" /> 
      </form>
      <figure ng-show="error_message">
        <img src="static/{{ error_img }}.jpg" ng-show="error_message" />
        <figcaption><span class=danger>{{ error_message }}</span></figcaption>
      </figure>


    <!-- results -->
    <ul class=cards ng-show="json" ng-style="results_style">
      <li ng-repeat="article in json.articles">
        <div class=card>
          <p class=card-title>{{ article.title }}</p>
          <img class=full ng-show="article.xlarge" src="{{ article.xlarge }}" />
          <p>{{ article.abstract }}</p>
          <p class=url>Read the full article</p>
        </div>
      </li>
    
    </div>
    <!-- end results -->


  </main>
  {% endraw %}
</span>

{% endblock %}
